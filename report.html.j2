<!DOCTYPE html>
<html>
<head>
  <title>Patching Report - {{ inventory_hostname }}</title>
  <style>
    /* Your CSS styles */
  </style>
</head>
<body>
  <h1>Patching Report</h1>
  <h2>Host Information</h2>
  <table border="1">
    <thead>
      <tr>
        <th>Hostname</th>
        <th>Distro Version</th>
        <th>Kernel Version</th>
        <th>Last Rebooted</th>
        <th>Status</th>
        <th>Reason (if applicable)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>{{ inventory_hostname }}</td>
        <td>{{ ansible_distribution_version }}</td>
        <td>{{ ansible_kernel }}</td>
        <td>{{ rebooted.stdout }}</td>
        <td>{{ hostvars[inventory_hostname]['status'] }}</td>
        <td>{{ hostvars[inventory_hostname]['reason'] }}</td>
      </tr>
    </tbody>
  </table>

  <h2>Unreachable Hosts</h2>
  {% if unreachable_hosts %}
    <p>The following hosts were unreachable:</p>
    <ul>
      {% for host in unreachable_hosts %}
        <li>{{ host }}</li>
      {% endfor %}
    </ul>
  {% else %}
    <p>All hosts were reachable.</p>
  {% endif %}

  <h2>Failed Hosts</h2>
  {% if failed_hosts %}
    <p>The following hosts failed tasks:</p>
    <ul>
      {% for host, tasks in failed_hosts.items() %}
        <li>{{ host }}</li>
        <ul>
          {% for task in tasks %}
            <li>{{ task }}</li>
          {% endfor %}
        </ul>
      {% endfor %}
    </ul>
  {% else %}
    <p>All tasks ran successfully on all hosts.</p>
  {% endif %}

</body>
</html>
